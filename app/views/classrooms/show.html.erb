<% if logged_in? %>
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-3 col-lg-2 col-sm-push-9 col-lg-push-10">
            <nav id="nav-bar-right" class="navbar navbar-default navbar-fixed-side navbar-inverse nav-bar-right center">
                <!-- normal collapsable navbar markup -->
            <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
                    <h2 class="navbar-text"><%= @classroom.name %>
                        <img class="dropdown-toggle dropdown-arrow" src="https://di-uploads-pod2.s3.amazonaws.com/grapponehonda/uploads/2015/03/down-arrow-white.png"></h2>
                </a>
                <ul class="dropdown-menu">
                    <% @classroom.teacher.classrooms.each do |classroom| %>
                    <li>
                        <a href="/teachers/<%= current_user.id%>/classrooms/<%= classroom.id %>"><%= classroom.name %></a>
                    </li>
                    <% end %>
                </ul>
            </li>
            <% if @classroom.teacher_id == current_user.id %>
            <% if @classroom.students.count > 3 %>
            <button type="submit" class="btn btn-primary btn-lg btn-block navbar-button" data-toggle="modal" data-target="#Teams">
                <h2 class="navbar-text white">Create New Teams</h2>
            </button>
            <% if @classroom.teams.present? %>
            <form action="/teachers/<%= params[:teacher_id] %>/classrooms/<%= params[:id] %>/teams">
                <button type="submit" class="btn btn-primary btn-lg btn-block navbar-button">
                    <h2 class="navbar-text white">View Teams</h2>
                </button>

            </form>
            <% end %>
        <% else %>
            <!-- your page content -->
            <p class="white">
                You need at least 4 students to create teams
            </p>
            <% end %>
            <input id="classroom_id" type="hidden" value="<%= @classroom.id %>">
            <input id="teacher_" type="hidden" value="<%= @classroom.teacher.id %>">
            <input id="students" type="hidden" value="<%= @students %>">
            <div class="random-toggle">
              <h2 class="white navbar-text white">Randomization Options:</h2>
                <div class="btn-group" data-toggle="buttons">
                    <label class="btn btn-primary cyclic-random-button">
                        <input type="radio" name="options" id="option2" autocomplete="off">
                        <h4 class="navbar-text white">Cyclic</h4>
                    </label>
                    <label class="btn btn-primary active true-random-button">
                        <input type="radio" name="options" id="option3" autocomplete="off" checked>
                        <h4 class="navbar-text white">True</h4>
                    </label>
                </div>
            </div>
            <button id="cyclic-random" type="submit" class="btn btn-primary btn-lg btn-block navbar-button" data-toggle="modal" name="/teachers/<%= params[:id] %>/classrooms/<%= @classroom.id %>/students" data-target="#CyclicRandom">
                <h2 class="navbar-text white">Random Student</h2>
            </button>
            <button id="true-random" type="submit" class="btn btn-primary btn-lg btn-block navbar-button" data-toggle="modal" name="/teachers/<%= params[:id] %>/classrooms/<%= @classroom.id %>/students" data-target="#TrueRandom">
                <h2 class="navbar-text white">Random Student</h2>
            </button>

            <form role="form" class="navbar-button" action="/teachers/<%= params[:id] %>/classrooms/<%= @classroom.id %>/students" method="post">
                <input style="width: 100%" type="text" class="form-control" id="student-name" name="name" placeholder="Marty, Max, Andy...">
                <button type="submit" class="btn btn-primary btn-lg btn-block navbar-button">
                    <h2 class="navbar-text white">Add Student</h2>
                </button><br>
            </form>
        </nav>
    </div>
    <div class="col-sm-9 col-lg-10 col-sm-pull-3 col-lg-pull-2">

        <div class="container">
            <div class="modal fade" id="TrueRandom" role="dialog">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header center">
                            <button type="button" class="close white" data-dismiss="modal">&times;</button>
                            <h1 class="modal-title" style="text-align:center;">The Lucky Student Is:</h1>
                        </div>
                        <div class="modal-body">
                            <h2 id="true-random-student" class="center"></h2>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="container">
            <div class="modal fade" id="CyclicRandom" role="dialog">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header center">
                            <button type="button" class="close white" data-dismiss="modal">&times;</button>
                            <h1 class="modal-title center">The Lucky Student Is:</h1>
                        </div>
                        <div class="modal-body">
                            <h2 id="cyclic-random-student" class="center"></h2>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <% if @classroom.students.count == 0 %>
          <h2 class="white center instructions">View the nav bar on the right to add a student</h2>
        <% end %>
        <div class="students">
            <h2 class="white center home-content">Students:</h2>
            <div class="form-group">
                <div class="col-sm-12 col-md-12 col-lg-12 students-search">
                    <input style="width: 30%;" type="search" class="form-control students-form center" id="search" placeholder="Student Search">
                </div>
            </div>
            <h3>
                <form role="form" action="/teachers/<%= @classroom.teacher.id %>/classrooms/<%= @classroom.id %>/teams" method="post">
                    <% @classroom.students.each do |student| %>
                    <div class="container student-name" style="position:relative; width:100%; left:25%;">
                        <div class="form-group">
                            <div class="searchable-container">
                                <div class="items">
                                    <div class="info-block block-info clearfix">
                                        <div data-toggle="buttons" class="btn-group bizmoduleselect">
                                            <label id="<%= student.id %>" class="btn btn-default active biz center" title="/teachers/<%= params[:teacher_id] %>/classrooms/<%= @classroom.id %>/students/<%= student.id %>/absences" style="width: 50%; border: 2px solid black;">
                                                <div class="bizcontent center">
                                                    <input checked="checked" type="checkbox" name="form[student_ids][<%= student.id %>]" a utocomplete="off" value="<%= student.id %>">
                                                    <span class="glyphicon glyphicon-ok glyphicon-lg"></span><br>
                                                    <h4 class="student-name center"><%= student.name %></h4>
                                                </div>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <% if student.absences.last.absence == true %>
                    <script>
                      jQuery(function(){
                         jQuery('#<%= student.id %>').click();
                         jQuery('#<%= student.id %>').addClass("absent");
                      });
                    </script>
                    <% end %>
                </h3>

                <% end %>
            </div>
            <div class="container">
                <div class="modal fade" id="Teams" role="dialog">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header center">
                                <button type="button" class="close white" data-dismiss="modal">&times;</button>
                                <h1 class="modal-title">Teams</h1>
                            </div>
                            <div class="modal-body">
                                You have
                                <%= @classroom.students.count %>
                                students
                                <form action="/teachers/<%= params[:teacher_id] %>/classrooms/<%= @classroom.id %>/teams" method="post">
                                <div class="form-group">
                                    <label for="teams">
                                        How many teams would you like?</label>
                                    <input type="text" style="width:20%" class="form-control" id="teams" name="teams" placeholder="enter number">
                                    <input type="hidden" class="form-control" id="class-name" name="classroom" value="<%= @classroom.id %>">
                          </div>
                          <button type="submit" class="btn btn-success btn">Create Teams</button><br>
                        </form>

                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
    <% end %>
    <% end %>
    <% if !logged_in? %>
    <% @classroom.students.each do |student| %>
    <h3>
        <li><%= student.name %>
        </li>
    </h3>
    <% end %>
    <% end %>
</div>
</div>
</div>
